// =============================================================================
// PHASE 4 — DEFI PRIMITIVES & PROTOCOLS
// =============================================================================
// All DeFi categories and specific protocols:
//   DEX (AMMs, orderbooks, aggregators)
//   Lending (overcollateralized, undercollateralized)
//   Stablecoins (fiat-backed, decentralized, yield-bearing)
//   Real-World Assets (RWA)
//   Liquid Staking
//   Derivatives & Perpetuals
//   Yield Aggregators
//   Prediction Markets
//   Chain-specific DeFi ecosystems (Solana, Base)
//
// ADD HERE: new DeFi protocols, yield strategies, or financial primitives.
// =============================================================================

import { CryptoNodeData } from '../types';

export const defiNodes: CryptoNodeData[] = [

  // ── TOP-LEVEL DEFI ────────────────────────────────────────────────────────────

  {
    id: 'defi-primitives',
    parentId: 'ethereum-l1',
    label: 'DeFi Primitives',
    description: 'Foundational financial protocols built on programmable blockchains',
    category: 'primitive',
    dependencies: ['ethereum-l1'],
    shortOverview: 'The lego blocks of Decentralized Finance: Trading, Lending, Stablecoins, and more.',
    deepInsight: 'DeFi recreates the financial system without banks. Protocols are open-source, permissionless (anyone can use them), and composable (they can plug into each other to create new products). A single transaction can borrow from Aave, swap on Uniswap, deposit into Yearn, and repay — all atomically.',
  },

  // ── DEX ─────────────────────────────────────────────────────────────────────

  {
    id: 'dex',
    parentId: 'defi-primitives',
    label: 'Decentralized Exchanges',
    description: 'Non-custodial trading protocols for token swaps on-chain',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Platforms that allow users to trade cryptocurrencies directly from their wallets without an intermediary.',
    deepInsight: 'DEXs use smart contracts to let users trade directly from their wallets without giving custody to an exchange. Liquidity can come from pools (AMMs) or orderbooks, and pricing is determined on-chain. The upside is permissionless access and composability; the tradeoffs include slippage, MEV risks, and gas costs during congestion.',
  },
  {
    id: 'amm',
    parentId: 'dex',
    label: 'Automated Market Makers',
    description: 'Liquidity pool-based DEXs using bonding curves (x*y=k and variants)',
    category: 'primitive',
    dependencies: ['dex'],
    shortOverview: 'A mechanism where users trade against a "Liquidity Pool" of funds rather than a specific counterparty.',
    deepInsight: 'AMMs revolutionized DeFi. Instead of needing a buyer and seller to match orders, "Liquidity Providers" deposit tokens into a pool. Prices are set automatically by a formula (e.g., x*y=k in Uniswap v2) based on supply and demand. This enabled permissionless markets for any token pair — no listing fees, no gatekeepers.',
  },
  {
    id: 'orderbook-dex',
    parentId: 'dex',
    label: 'Orderbook DEXs',
    description: 'On-chain limit order matching with maker-taker model for efficient price discovery',
    category: 'primitive',
    dependencies: ['dex'],
    shortOverview: 'DEXs that function like traditional exchanges (Binance/Nasdaq), with a matching book of buy and sell orders.',
    deepInsight: 'Orderbooks are better for efficient pricing and large trades (no slippage from a formula) but harder to build on-chain due to high gas costs and speed requirements. They are popular on fast chains like Solana (Serum/OpenBook) or specialized L2s. The hybrid approach (off-chain matching, on-chain settlement) is increasingly common.',
  },
  {
    id: 'dex-aggregators',
    parentId: 'dex',
    label: 'DEX Aggregators',
    description: 'Routing protocols that split trades across multiple DEXs for best execution',
    category: 'primitive',
    dependencies: ['dex'],
    shortOverview: 'The "Expedia" of crypto trading — they search all DEXs to find you the best price.',
    deepInsight: 'Liquidity is fragmented across Uniswap, Curve, Balancer, and many others. Aggregators (like 1inch) split your trade: "30% via Uniswap, 70% via Curve" to minimize slippage and get you the most tokens. Some aggregators (like CoW Swap) go further and protect against MEV.',
  },
  {
    id: 'uniswap',
    parentId: 'amm',
    label: 'Uniswap',
    description: 'Leading AMM with concentrated liquidity (v3/v4) and multi-chain deployment',
    category: 'player',
    dependencies: ['amm'],
    shortOverview: 'The most dominant decentralized exchange, defining the AMM standard.',
    deepInsight: 'Uniswap V3 introduced "Concentrated Liquidity", allowing providers to focus their capital in specific price ranges (e.g., ETH liquidity only between $2000-$3000). This makes capital 4000x more efficient than standard AMMs but requires active management. V4 introduces "Hooks" — plugins that let developers customize pool behavior.',
  },
  {
    id: 'curve',
    parentId: 'amm',
    label: 'Curve Finance',
    description: 'Stableswap AMM optimized for low-slippage trades between pegged assets',
    category: 'player',
    dependencies: ['amm'],
    shortOverview: 'The leading AMM for stablecoins (USDC to USDT) and pegged assets (ETH to stETH).',
    deepInsight: 'Curve uses a specialized formula that is flatter in the middle, allowing for massive trades between similar assets with almost zero slippage. This makes it the backbone for stablecoin liquidity. The "Curve Wars" — protocols bribing veCRV holders to direct emissions to their pools — became a central DeFi meta-game.',
  },
  {
    id: 'balancer',
    parentId: 'amm',
    label: 'Balancer',
    description: 'Multi-token AMM pools with customizable weights — a programmable ETF engine',
    category: 'player',
    dependencies: ['amm'],
    shortOverview: 'A flexible AMM that acts like a self-rebalancing ETF.',
    deepInsight: 'Unlike Uniswap (50/50 pools), Balancer allows pools with up to 8 tokens and uneven weights (e.g., 80% ETH, 20% USDC). This makes it great for index funds or bootstrapping liquidity for new tokens (LBPs — Liquidity Bootstrapping Pools). It also powers the Balancer-Aave ecosystem collaboration.',
  },
  {
    id: 'pancakeswap',
    parentId: 'amm',
    label: 'PancakeSwap',
    description: 'BNB Chain AMM with v3 concentrated liquidity and gamified features',
    category: 'player',
    dependencies: ['amm'],
    shortOverview: 'The dominant DEX on BNB Chain, known for its high retail volume and gamified features.',
    deepInsight: 'PancakeSwap brought AMM trading to BNB Chain and layered on farming, lotteries, and other gamified features to drive retail adoption. It now supports concentrated liquidity and has expanded to multiple chains. Its growth is tightly linked to BNB Chain\'s low-cost, high-volume user base.',
  },
  {
    id: 'dydx',
    parentId: 'orderbook-dex',
    label: 'dYdX',
    description: 'Decentralized perps exchange with off-chain orderbook on its own Cosmos appchain',
    category: 'player',
    dependencies: ['orderbook-dex'],
    shortOverview: 'The top perpetuals exchange — moved to its own Cosmos chain (v4) for maximum performance.',
    deepInsight: 'dYdX moved from an Ethereum L2 (StarkEx) to its own Cosmos app-chain in v4. This allows them to run a high-speed off-chain matching engine (for instant order execution like a CEX) while keeping decentralization through its validator set. All fees go to stakers rather than a company.',
  },
  {
    id: '1inch',
    parentId: 'dex-aggregators',
    label: '1inch',
    description: 'DEX aggregator with Pathfinder algorithm and limit order protocol',
    category: 'player',
    dependencies: ['dex-aggregators'],
    shortOverview: 'The premier DEX aggregator, routing across many liquidity sources for best execution.',
    deepInsight: '1inch routes trades across many DEXs to find the best execution, often splitting a single swap into multiple paths. It also offers limit orders and RFQ-style liquidity (gasless quotes from market makers), making it useful for both retail and power users.',
  },
  {
    id: 'cowswap',
    parentId: 'dex-aggregators',
    label: 'CoW Swap',
    description: 'MEV-protected DEX using batch auctions and coincidence of wants',
    category: 'player',
    dependencies: ['dex-aggregators'],
    shortOverview: 'A DEX focusing on MEV protection — "CoW" stands for Coincidence of Wants.',
    deepInsight: 'On CoW Swap, you sign an "intent" to trade, not a transaction. Solvers compete to find the best price for you. If Alice wants ETH and Bob is selling ETH, they match directly (Coincidence of Wants) without paying AMM fees. Solvers also protect you from sandwich attacks by batching trades. CoW Protocol is the foundation of Balancer\'s MEV protection.',
  },

  // ── LENDING ──────────────────────────────────────────────────────────────────

  {
    id: 'lending',
    parentId: 'defi-primitives',
    label: 'Lending Protocols',
    description: 'Protocols for borrowing and lending crypto assets with on-chain collateral',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Platforms that allow users to lend assets to earn interest or borrow assets by providing collateral.',
    deepInsight: 'DeFi lending is permissionless (no credit score needed). It is almost always "over-collateralized", meaning you must deposit $150 of ETH to borrow $100 of USDC. This protects the protocol: if your collateral value drops, you get liquidated. Flash loans (borrow millions for one block, repay in same transaction) are a unique DeFi primitive.',
  },
  {
    id: 'overcollateralized-lending',
    parentId: 'lending',
    label: 'Over-Collateralized Lending',
    description: 'Lending requiring collateral exceeding loan value to prevent defaults',
    category: 'primitive',
    dependencies: ['lending'],
    shortOverview: 'The standard model in DeFi: borrow less than you deposit.',
    deepInsight: 'Security is maintained by liquidators — bots that monitor loans. If a borrower\'s Health Factor drops below 1 (collateral value < required threshold), the liquidator repays the loan and seizes the collateral + a bonus. This ensures the protocol stays solvent. The system works well for crypto assets but can fail violently during sharp market crashes.',
  },
  {
    id: 'undercollateralized-lending',
    parentId: 'lending',
    label: 'Under-Collateralized Lending',
    description: 'Credit-based lending using reputation, delegation, or real-world legal agreements',
    category: 'primitive',
    dependencies: ['lending'],
    shortOverview: 'Lending based on trust or credit scores, similar to a traditional bank loan.',
    deepInsight: 'This is harder to do in DeFi because identities are pseudonymous. Protocols solve this by lending to known institutional borrowers (who sign legal contracts off-chain) or by using "Credit Delegation" where a trusted party vouches for the borrower. The 2022 bear market saw significant defaults, exposing the challenges of enforcing pseudonymous credit.',
  },
  {
    id: 'aave',
    parentId: 'overcollateralized-lending',
    label: 'Aave',
    description: 'Multi-chain lending with flash loans, e-modes, and isolated risk pools (V3)',
    category: 'player',
    dependencies: ['overcollateralized-lending'],
    shortOverview: 'The largest lending protocol in DeFi, offering advanced features for power users.',
    deepInsight: 'Aave invented "Flash Loans" (borrow millions for one transaction without collateral — great for arbitrage and liquidations) and "Efficiency Mode" (getting 97% LTV when borrowing similar assets like USDC vs USDT). V3 added cross-chain portals and isolated risk pools. Aave is the gold standard for DeFi lending, deployed across 12+ chains.',
  },
  {
    id: 'compound',
    parentId: 'overcollateralized-lending',
    label: 'Compound',
    description: 'Algorithmic money market with pooled liquidity and cToken interest-bearing receipts',
    category: 'player',
    dependencies: ['overcollateralized-lending'],
    shortOverview: 'The protocol that kicked off "DeFi Summer" by introducing liquidity mining with COMP tokens.',
    deepInsight: 'Compound\'s innovation was the "cToken" (e.g., cUSDC). When you deposit USDC, you get cUSDC, which automatically accrues interest in its exchange rate. You can transfer cUSDC to someone else, and they will earn the interest. This tokenization of yield-bearing positions is a core DeFi primitive used everywhere.',
  },
  {
    id: 'morpho',
    parentId: 'overcollateralized-lending',
    label: 'Morpho',
    description: 'Peer-to-peer lending optimizer that improves rates over pooled protocols',
    category: 'player',
    dependencies: ['overcollateralized-lending'],
    shortOverview: 'A "Lending Optimizer" and now a full lending protocol with modular risk markets.',
    deepInsight: 'Morpho started as an optimizer layer on top of Aave/Compound, matching borrowers and lenders P2P for better rates. Morpho Blue is now a standalone, highly efficient lending primitive where risk curators (like Gauntlet) build isolated markets with specific collateral and oracle choices. This modularity prevents systemic risk from spreading across all assets.',
  },
  {
    id: 'spark',
    parentId: 'overcollateralized-lending',
    label: 'Spark Protocol',
    description: 'MakerDAO\'s lending frontend with direct DAI minting and infinite DAI liquidity',
    category: 'player',
    dependencies: ['overcollateralized-lending'],
    shortOverview: 'MakerDAO\'s lending interface — direct access to DAI with no liquidity ceiling.',
    deepInsight: 'Spark is a fork of Aave V3. Its superpower is that it can mint DAI directly from the Maker protocol rather than relying on pooled liquidity. This means it has effectively infinite DAI liquidity for traders who want to leverage ETH, at a rate set by Maker governance.',
  },
  {
    id: 'maple',
    parentId: 'undercollateralized-lending',
    label: 'Maple Finance',
    description: 'Institutional credit protocol with pool delegates performing underwriting',
    category: 'player',
    dependencies: ['undercollateralized-lending'],
    shortOverview: 'A marketplace for institutional crypto lending — on-chain credit markets.',
    deepInsight: 'Maple targets market makers (like Wintermute) who need short-term capital. "Pool Delegates" (credit experts) perform due diligence and underwrite loans. Lenders deposit USDC to earn higher yields, but take the risk of borrower default. After significant defaults in the 2022 bear market, Maple tightened underwriting standards significantly.',
  },
  {
    id: 'goldfinch',
    parentId: 'undercollateralized-lending',
    label: 'Goldfinch',
    description: 'Decentralized credit protocol for real-world lending without crypto collateral',
    category: 'player',
    dependencies: ['undercollateralized-lending'],
    shortOverview: 'A protocol bringing crypto loans to real-world businesses in emerging markets.',
    deepInsight: 'Goldfinch lends USDC to real-world fintech companies (e.g., in Nigeria or Mexico) who then lend to local businesses. It uses a "Backer" system where risk-tolerant investors provide "first-loss" capital to vouch for borrowers. This brings DeFi yields to real-world credit markets.',
  },

  // ── STABLECOINS ──────────────────────────────────────────────────────────────

  {
    id: 'stablecoins',
    parentId: 'defi-primitives',
    label: 'Stablecoins',
    description: 'Cryptocurrencies designed to maintain stable value against fiat or other assets',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Cryptocurrencies pegged to a stable asset (usually $1 USD) to avoid volatility.',
    deepInsight: 'Stablecoins are the "killer app" of crypto, serving as a haven from volatility and a medium of exchange. They come in three flavors: Fiat-Backed (centralized IOU), Crypto-Backed (decentralized, over-collateralized), and Algorithmic (math-based, high risk). The Terra/LUNA collapse in 2022 illustrated the dangers of purely algorithmic stablecoins.',
  },
  {
    id: 'fiat-backed-stables',
    parentId: 'stablecoins',
    label: 'Fiat-Backed Stablecoins',
    description: 'Stablecoins backed 1:1 by reserves of fiat currency in regulated bank accounts',
    category: 'primitive',
    dependencies: ['stablecoins'],
    shortOverview: 'Digital tokens representing fiat money held in a regulated bank account.',
    deepInsight: 'Users trust a centralized issuer (Circle, Tether). For every 1 token minted, they hold $1 in a bank or treasury bills. They are capital efficient (1:1 ratio) but prone to censorship (issuer can freeze funds) and regulatory risk. When SVB collapsed in 2023, USDC briefly lost its peg because Circle held reserves there.',
  },
  {
    id: 'usdc',
    parentId: 'fiat-backed-stables',
    label: 'USDC',
    description: 'Circle-issued dollar stablecoin with monthly attestations and regulated reserves',
    category: 'player',
    dependencies: ['fiat-backed-stables'],
    shortOverview: 'The most regulated and transparent fiat-backed stablecoin, issued by Circle.',
    deepInsight: 'USDC is widely used in DeFi because its reserves are attested by major accounting firms. It functions as a digital dollar for trading, lending, and payments, and is often the primary quote asset across markets. The tradeoff is centralization: Circle can freeze addresses and the token depends on traditional banking infrastructure.',
  },
  {
    id: 'usdt',
    parentId: 'fiat-backed-stables',
    label: 'Tether (USDT)',
    description: 'Largest stablecoin by market cap with multi-chain deployment and highest CEX volume',
    category: 'player',
    dependencies: ['fiat-backed-stables'],
    shortOverview: 'The first and largest stablecoin, dominating trading volume on centralized exchanges.',
    deepInsight: 'Tether is controversial due to historic opacity about its reserves, though it has improved transparency. Despite this, it remains the market leader due to its deep liquidity and first-mover advantage, especially in Asia, on Tron, and on CEXs. Tether generates over $6B/year in profit from its reserve treasury, making it one of the most profitable companies in finance per employee.',
  },
  {
    id: 'decentralized-stables',
    parentId: 'stablecoins',
    label: 'Decentralized Stablecoins',
    description: 'Algorithmic or crypto-collateralized stables without a central custodian',
    category: 'primitive',
    dependencies: ['stablecoins'],
    shortOverview: 'Stablecoins minted on-chain using crypto assets as collateral, with no central bank account.',
    deepInsight: 'The goal is a censorship-resistant dollar. Since you can\'t put a dollar bill on the blockchain, you lock up ETH (or other crypto) and mint tokens against it. The protocol manages the peg via liquidations and incentives. These are more resilient to censorship but vulnerable to "de-pegging" during extreme market volatility.',
  },
  {
    id: 'dai',
    parentId: 'decentralized-stables',
    label: 'DAI',
    description: 'MakerDAO stablecoin backed by over-collateralized crypto and real-world assets in vaults',
    category: 'player',
    dependencies: ['decentralized-stables'],
    shortOverview: 'The first major decentralized stablecoin — now backed by a mix of crypto and RWAs.',
    deepInsight: 'DAI is soft-pegged to the dollar. It is minted by users opening "Vaults" and depositing collateral (ETH, WBTC, USDC, RWAs). If the collateral value drops too low, it is auctioned off to repay the DAI debt. Now rebranded as USDS, MakerDAO (now Sky) is increasingly backing DAI with real-world assets like US Treasuries.',
  },
  {
    id: 'frax',
    parentId: 'decentralized-stables',
    label: 'FRAX',
    description: 'Fractional-algorithmic stablecoin with dynamic collateralization ratio',
    category: 'player',
    dependencies: ['decentralized-stables'],
    shortOverview: 'A hybrid stablecoin — partially backed by collateral and partially algorithmic.',
    deepInsight: 'Frax introduced fractional backing to improve capital efficiency. In V3, they moved toward 100% collateralization backed by RWAs and crypto, prioritizing trust. Frax also introduced FraxETH (liquid staking) and an AMO (Algorithmic Market Operations) system for managing peg stability mechanically.',
  },
  {
    id: 'lusd',
    parentId: 'decentralized-stables',
    label: 'LUSD',
    description: 'Liquity stablecoin with 110% collateral ratio, one-time fee, and zero governance',
    category: 'player',
    dependencies: ['decentralized-stables'],
    shortOverview: 'The most resilient decentralized stablecoin — immutable, backed only by ETH.',
    deepInsight: 'Liquity is immutable (cannot be changed or upgraded). It allows a very low Collateral Ratio (110%) because of its efficient "Stability Pool" mechanism which instantly liquidates unsafe loans without needing market arbitrageurs. LUSD has maintained its peg through multiple market crashes, earning a reputation as the hardest decentralized stablecoin.',
  },
  {
    id: 'yield-bearing-stables',
    parentId: 'stablecoins',
    label: 'Yield-Bearing Stablecoins',
    description: 'Stablecoins that accrue yield from backing assets or protocol revenue to holders',
    category: 'primitive',
    dependencies: ['stablecoins'],
    shortOverview: 'Stablecoins that pay you interest just for holding them in your wallet.',
    deepInsight: 'Standard stablecoins (USDC) keep the yield from their reserves for the issuer. Yield-bearing stables pass that yield (from Treasuries, staking, or funding rates) on to the holder — either by increasing the balance (rebasing like USDM) or increasing the token value (accumulating like sDAI). They are becoming the preferred form of "idle" capital in DeFi.',
  },
  {
    id: 'usde',
    parentId: 'yield-bearing-stables',
    label: 'USDe (Ethena)',
    description: 'Synthetic dollar using delta-neutral stETH long + ETH short for ~20% yield',
    category: 'player',
    dependencies: ['yield-bearing-stables'],
    shortOverview: 'A "Synthetic Dollar" that generates high yield from a delta-neutral "Cash and Carry" trade.',
    deepInsight: 'USDe holds Staked ETH (earning ~3%) and shorts ETH perpetual futures (earning funding rates ~10-20% in bull markets). This creates a "Delta Neutral" position (stable value regardless of ETH price moves) with high yield. It is not backed by fiat or over-collateralization, but by a hedging strategy. The risk is negative funding rates — when more traders are short than long, Ethena pays funding.',
  },
  {
    id: 'mountain-usdm',
    parentId: 'yield-bearing-stables',
    label: 'USDM (Mountain Protocol)',
    description: 'Regulated yield-bearing stablecoin backed by short-term US Treasuries',
    category: 'player',
    dependencies: ['yield-bearing-stables'],
    shortOverview: 'A regulated stablecoin that passes risk-free US Treasury yields directly to holders.',
    deepInsight: 'Mountain Protocol provides non-US users access to US Treasury yields. It is a rebasing token: if you hold 100 USDM and the yield is 5%, you automatically receive 105 USDM at year end. It is regulated, asset-backed, and primarily targeting institutions and DAOs that need on-chain yield without smart contract risk.',
  },

  // ── REAL-WORLD ASSETS ────────────────────────────────────────────────────────

  {
    id: 'rwa',
    parentId: 'defi-primitives',
    label: 'Real-World Assets (RWA)',
    description: 'Tokenization of off-chain assets like bonds, real estate, and private credit',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Bringing traditional assets (Stocks, Real Estate, Bonds) onto the blockchain.',
    deepInsight: 'RWA is the bridge between TradFi ($300T+ in assets) and DeFi ($100B). By tokenizing assets, we gain: 24/7 trading, fractional ownership (buy $5 of a house), and composability (use a tokenized bond as collateral for a loan on Aave). BlackRock, JPMorgan, and Goldman Sachs are all actively exploring tokenized assets.',
  },
  {
    id: 'ondo',
    parentId: 'rwa',
    label: 'Ondo Finance',
    description: 'Institutional-grade tokenized US Treasuries and short-term bond products',
    category: 'player',
    dependencies: ['rwa'],
    shortOverview: 'The leader in tokenized US Treasuries — OUSG and USDY bring T-bills on-chain.',
    deepInsight: 'Ondo offers products like OUSG (tokenized US Treasuries) and USDY (yield-bearing note backed by short-term Treasuries). They handle the legal complexity of buying securities and wrap them in a simple ERC-20 token. Ondo is building Ondo Chain, an L1 specifically designed for RWA composability.',
  },
  {
    id: 'blackrock-buidl',
    parentId: 'rwa',
    label: 'BlackRock BUIDL',
    description: 'Tokenized money market fund providing yield from US Treasuries on Ethereum',
    category: 'player',
    dependencies: ['rwa'],
    shortOverview: 'A tokenized fund by the world\'s largest asset manager ($10T AUM) on Ethereum.',
    deepInsight: 'BlackRock issuing a token on a public blockchain is a massive validation of the technology. BUIDL (BlackRock USD Institutional Digital Liquidity Fund) creates a new standard where institutions can hold cash on-chain earning Treasury yield, with T+0 settlement. It became the fastest-growing tokenized fund in history, reaching $500M in 6 weeks.',
  },
  {
    id: 'centrifuge',
    parentId: 'rwa',
    label: 'Centrifuge',
    description: 'Protocol for financing real-world assets through tokenized asset pools',
    category: 'player',
    dependencies: ['rwa'],
    shortOverview: 'A platform for financing structured credit (invoices, mortgages, trade finance) on-chain.',
    deepInsight: 'Centrifuge connects real-world borrowers (who originate loans like invoice factoring or trade finance) with DeFi lenders. They invented the legal structure (SPV + smart contract) that allows a smart contract to own rights to real-world collateral. Integrated with MakerDAO as a major RWA collateral source.',
  },

  // ── LIQUID STAKING ───────────────────────────────────────────────────────────

  {
    id: 'staking-derivatives',
    parentId: 'defi-primitives',
    label: 'Liquid Staking',
    description: 'Protocols issuing liquid tokens representing staked assets for use in DeFi',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Stake your ETH while keeping it liquid and usable in DeFi.',
    deepInsight: 'Before liquid staking, staking ETH meant locking it up completely. Liquid Staking protocols issue a receipt token (like stETH) that represents your staked ETH. You can use this stETH in DeFi (lend it, use as collateral, trade it) while it still earns staking rewards in the background. LSTs have become the most important collateral in DeFi.',
  },
  {
    id: 'lido',
    parentId: 'staking-derivatives',
    label: 'Lido',
    description: 'Market-leading liquid staking provider with stETH token across multiple chains',
    category: 'player',
    dependencies: ['staking-derivatives'],
    shortOverview: 'The market leader in liquid staking — stETH is the most widely used collateral in DeFi.',
    deepInsight: 'Lido is a DAO that manages a curated set of professional node operators. When you stake ETH with Lido, they distribute it across these operators. Lido controls >30% of all staked ETH, raising significant concerns about Ethereum\'s validator centralization. They are addressing this with DVT (Distributed Validator Technology) support.',
  },
  {
    id: 'rocket-pool',
    parentId: 'staking-derivatives',
    label: 'Rocket Pool',
    description: 'Decentralized liquid staking with permissionless node operators (8 ETH minimum)',
    category: 'player',
    dependencies: ['staking-derivatives'],
    shortOverview: 'A decentralized liquid staking protocol where anyone can run a validator node.',
    deepInsight: 'Unlike Lido (permissioned operators), Rocket Pool is permissionless. Anyone with 8 ETH + RPL collateral can run a validator. Node operators take on some of the user\'s ETH risk, aligning incentives. This design aligns better with Ethereum\'s ethos of decentralization, though it\'s more complex to operate.',
  },
  {
    id: 'frax-ether',
    parentId: 'staking-derivatives',
    label: 'Frax Ether (frxETH)',
    description: 'Dual-token liquid staking splitting liquidity (frxETH) from yield accumulation (sfrxETH)',
    category: 'player',
    dependencies: ['staking-derivatives'],
    shortOverview: 'Frax\'s liquid staking design separating the liquid token from the yield-bearing token.',
    deepInsight: 'Frax Ether separates two roles: frxETH is a liquid token meant to track ETH\'s price (for DeFi use), while sfrxETH is the yield-bearing token that accrues all staking rewards. Since not everyone converts to sfrxETH, sfrxETH holders get amplified yield. This elegant design maximizes returns for yield seekers while providing a liquid pegged asset for DeFi.',
  },

  // ── DERIVATIVES & PERPETUALS ─────────────────────────────────────────────────

  {
    id: 'derivatives',
    parentId: 'defi-primitives',
    label: 'Derivatives & Perps',
    description: 'Leveraged trading and synthetic exposure without holding underlying assets',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Financial contracts that provide exposure or leverage without holding the asset.',
    deepInsight: 'On-chain derivatives let traders take long/short exposure, hedge positions, or access leverage with smart contracts. These protocols rely on oracles for fair pricing, margin systems for risk management, and liquidation engines to keep the system solvent. Derivatives volume on-chain now rivals some CEXs in bull markets.',
  },
  {
    id: 'perpetuals',
    parentId: 'derivatives',
    label: 'Perpetual Futures',
    description: 'Contracts with no expiry using funding rates to keep price anchored to spot',
    category: 'primitive',
    dependencies: ['derivatives'],
    shortOverview: 'Futures that never expire — kept in line with spot prices by hourly funding payments.',
    deepInsight: 'Perpetuals are leveraged contracts with no expiry date. Instead of settlement, they use a funding rate that periodically transfers value between longs and shorts to keep the perp price anchored to spot. Traders post margin, and if their position moves against them past a threshold they get liquidated. This enables 24/7 leveraged trading across hundreds of assets.',
  },
  {
    id: 'options',
    parentId: 'derivatives',
    label: 'Options Protocols',
    description: 'On-chain options for hedging and speculation with defined-risk payoffs',
    category: 'primitive',
    dependencies: ['derivatives'],
    shortOverview: 'Protocols for buying and selling call/put options with defined risk.',
    deepInsight: 'Options give the right, not the obligation, to buy or sell an asset at a preset strike before expiry. Buyers pay a premium for defined risk; sellers collect premiums but take on obligation risk. On-chain options often use vaults and automated market making to create liquidity, making complex strategies accessible to retail users.',
  },
  {
    id: 'gmx',
    parentId: 'perpetuals',
    label: 'GMX',
    description: 'Decentralized perps using multi-asset liquidity pool (GM pools) as counterparty',
    category: 'player',
    dependencies: ['perpetuals'],
    shortOverview: 'Perpetuals DEX where a pooled vault acts as the counterparty to traders.',
    deepInsight: 'GMX routes trades against a multi-asset liquidity pool rather than an orderbook. This enables low-slippage trades and straightforward execution, while LPs earn fees and take the opposite side of trader PnL. V2 introduced isolated GM pools per market, reducing risk correlation between assets.',
  },
  {
    id: 'synthetix',
    parentId: 'perpetuals',
    label: 'Synthetix',
    description: 'Derivatives protocol with shared debt pool model and atomic swaps',
    category: 'player',
    dependencies: ['perpetuals'],
    shortOverview: 'A synthetic-asset platform powered by an over-collateralized shared debt pool.',
    deepInsight: 'Synthetix lets users mint synthetic assets by locking collateral into a shared debt pool. The protocol can offer deep liquidity and atomic swaps because the pool is the counterparty. It\'s also the liquidity backbone for many other Optimism perps protocols (Kwenta, Polynomial) that build on top of Synthetix.',
  },
  {
    id: 'gains-network',
    parentId: 'perpetuals',
    label: 'Gains Network (gTrade)',
    description: 'Synthetic leverage trading with liquidity vault and oracle-based execution',
    category: 'player',
    dependencies: ['perpetuals'],
    shortOverview: 'Perpetual trading with synthetic exposure — up to 150x leverage on Arbitrum/Polygon.',
    deepInsight: 'Gains Network uses a pooled liquidity vault as counterparty for synthetic perps with very high leverage limits. Trades are priced via Chainlink oracles and a risk engine manages open interest. The design can be capital efficient with the vault earning fees from trading volume.',
  },
  {
    id: 'vertex',
    parentId: 'perpetuals',
    label: 'Vertex Protocol',
    description: 'Hybrid DEX combining spot AMM and perps orderbook with cross-margin on Arbitrum',
    category: 'player',
    dependencies: ['perpetuals'],
    shortOverview: 'A unified trading venue combining spot, perps, and lending in one cross-margined account.',
    deepInsight: 'Vertex blends orderbook-style trading with AMM liquidity to offer tighter spreads and deeper markets. It supports cross-margining so users can reuse collateral across products, improving capital efficiency. The integrated lending and borrowing within the same margin account is a unique design.',
  },
  {
    id: 'ribbon',
    parentId: 'options',
    label: 'Ribbon Finance',
    description: 'Structured products protocol automating covered call and put options vaults',
    category: 'player',
    dependencies: ['options'],
    shortOverview: 'Automated options vaults that sell options weekly to generate yield.',
    deepInsight: 'Ribbon packages common options strategies (like covered calls) into vaults so users can earn premiums without managing positions manually. This can smooth yield in quiet markets, but it caps upside during rallies and can suffer drawdowns when volatility spikes sharply. Now rebranded and part of the Aevo ecosystem.',
  },
  {
    id: 'dopex',
    parentId: 'options',
    label: 'Dopex',
    description: 'Decentralized options exchange with single-staking option vaults (SSOVs)',
    category: 'player',
    dependencies: ['options'],
    shortOverview: 'An options protocol focused on efficient option selling and structured products.',
    deepInsight: 'Dopex introduces vaults that aggregate liquidity for specific strikes, making it easier to price and trade options on-chain. It offers Atlantic Puts (options that can be rolled for free) and structured products to simplify options participation for DeFi native users.',
  },

  // ── YIELD AGGREGATORS ─────────────────────────────────────────────────────────

  {
    id: 'yield-aggregators',
    parentId: 'defi-primitives',
    label: 'Yield Aggregators',
    description: 'Protocols that auto-compound and optimize yield across multiple DeFi protocols',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Set-and-forget yield optimization — your capital is automatically moved to the highest-yielding strategy.',
    deepInsight: 'Yield aggregators (also called "yield optimizers" or "vaults") automatically compound rewards, shift capital between protocols to chase the best APY, and abstract away the complexity of DeFi farming. They earn revenue through performance fees (typically 20% of profits). The key risk is smart contract composability — a bug in any underlying protocol can drain the vault.',
  },
  {
    id: 'yearn',
    parentId: 'yield-aggregators',
    label: 'Yearn Finance',
    description: 'Original yield aggregator with community-built vaults and DAO treasury management',
    category: 'player',
    dependencies: ['yield-aggregators'],
    shortOverview: 'The OG yield aggregator — pioneered automated yield farming strategies.',
    deepInsight: 'Yearn pioneered the "Vault" concept: deposit tokens, receive yTokens that automatically compound yield. Community strategists write strategies that deploy capital across protocols like Curve, Aave, and Compound. Yearn also invented "Vaults V3", a permissionless system where anyone can add strategies. YFI, with no VC allocation and fair launch, became iconic.',
  },
  {
    id: 'convex',
    parentId: 'yield-aggregators',
    label: 'Convex Finance',
    description: 'Curve and Frax boost aggregator locking CRV/FXS for amplified yields',
    category: 'player',
    dependencies: ['yield-aggregators'],
    shortOverview: 'Boost your Curve yields without locking CRV yourself — Convex does it for you.',
    deepInsight: 'Convex aggregates veCRV (vote-locked CRV) to boost yields for all depositors. Instead of each user locking CRV individually, Convex locks massive amounts and redistributes the boost. This created the "Curve Wars" where protocols bribe CVX holders to vote for their Curve pools. Convex controls >40% of all CRV supply.',
  },

  // ── PREDICTION MARKETS ────────────────────────────────────────────────────────

  {
    id: 'prediction-markets',
    parentId: 'defi-primitives',
    label: 'Prediction Markets',
    description: 'On-chain markets for betting on real-world event outcomes',
    category: 'primitive',
    dependencies: ['defi-primitives'],
    shortOverview: 'Markets where you can buy shares in "Yes" or "No" outcomes of real-world events.',
    deepInsight: 'Prediction markets use collective wisdom to forecast outcomes — the market price reflects the crowd\'s probability estimate. They are one of crypto\'s most compelling use cases: elections, sports, economic data, and even geopolitical events can be traded. Oracles resolve outcomes on-chain, and the best forecasters profit. The 2024 US election proved prediction markets can outperform polls.',
  },
  {
    id: 'polymarket',
    parentId: 'prediction-markets',
    label: 'Polymarket',
    description: 'Largest on-chain prediction market for news and global events on Polygon',
    category: 'player',
    dependencies: ['prediction-markets'],
    shortOverview: 'The dominant prediction market — billions in volume on the 2024 US election alone.',
    deepInsight: 'Polymarket runs on Polygon and uses USDC for settlement. During the 2024 US presidential election, it processed over $3.6B in volume, becoming the world\'s most liquid prediction market. It uses UMA Protocol as the oracle for resolving outcomes. Polymarket is often cited alongside traditional polls and forecasters as a superior probability signal.',
  },

  // ── SOLANA DEFI ──────────────────────────────────────────────────────────────

  {
    id: 'solana-defi',
    parentId: 'solana',
    label: 'Solana DeFi Ecosystem',
    description: 'High-speed DeFi primitives leveraging Solana\'s parallel execution and low fees',
    category: 'primitive',
    dependencies: ['solana'],
    shortOverview: 'DeFi built for speed — low-fee trading, real-time markets, and meme launchpads.',
    deepInsight: 'Solana\'s parallel execution and sub-cent fees make high-frequency orderbooks and rapid settlement viable on-chain. This attracts trading-focused applications like perps, aggregators, and high-throughput AMMs. Solana became the dominant chain for memecoins and retail trading activity in the 2024 bull market.',
  },
  {
    id: 'jupiter',
    parentId: 'solana-defi',
    label: 'Jupiter',
    description: 'Solana\'s dominant DEX aggregator with limit orders, perps, and DCA features',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'The go-to routing layer for swapping tokens on Solana — handles 70%+ of DEX volume.',
    deepInsight: 'Jupiter aggregates liquidity across Solana DEXs to find the best price, splitting routes when needed to reduce slippage. It expanded beyond swaps with limit orders, dollar-cost averaging (DCA), perps, and a launchpad. JUP token distribution was one of the largest airdrops in crypto history by dollar value.',
  },
  {
    id: 'raydium',
    parentId: 'solana-defi',
    label: 'Raydium',
    description: 'AMM on Solana with concentrated liquidity and launchpool for new tokens',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'A flagship Solana AMM — deeply integrated with pump.fun for memecoin liquidity.',
    deepInsight: 'Raydium provides AMM liquidity for swaps and is the primary destination for pump.fun tokens graduating to DEX trading. It offers Concentrated Liquidity (CLMM) pools for capital-efficient LP positions and fusion pools for yield farming. When pump.fun tokens graduate, their liquidity is automatically seeded into Raydium.',
  },
  {
    id: 'marinade',
    parentId: 'solana-defi',
    label: 'Marinade Finance',
    description: 'Liquid staking on Solana issuing mSOL with automatic validator delegation',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'Solana\'s premier liquid staking protocol — mSOL for DeFi use.',
    deepInsight: 'Marinade lets users stake SOL while receiving mSOL, which can be used across DeFi for additional yield. It spreads delegation across hundreds of validators to support decentralization — unlike single-validator staking that concentrates stake. The main risks are smart contract security and market liquidity for mSOL.',
  },
  {
    id: 'kamino',
    parentId: 'solana-defi',
    label: 'Kamino Finance',
    description: 'Automated liquidity management, lending, and leveraged yield strategies on Solana',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'Automated liquidity vaults, lending, and leverage strategies for Solana power users.',
    deepInsight: 'Kamino packages complex LP and leverage strategies into vaults so users can earn yield without constant rebalancing. Its lending market competes with Solend. It also enables liquidity loops — borrowing against LSTs to increase staking exposure. Kamino has grown into one of Solana\'s most used DeFi protocols.',
  },
  {
    id: 'drift',
    parentId: 'solana-defi',
    label: 'Drift Protocol',
    description: 'Decentralized perpetuals and spot DEX with dynamic AMM and cross-margin on Solana',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'Perps and spot trading with cross-margining and a dynamic AMM on Solana.',
    deepInsight: 'Drift combines spot and perpetual markets in a single risk engine, allowing cross-margin and capital efficiency. Its dynamic AMM adapts to market conditions to improve spreads. Drift has become Solana\'s leading perps DEX as dYdX moved to its own chain.',
  },
  {
    id: 'jito',
    parentId: 'solana-defi',
    label: 'Jito',
    description: 'MEV infrastructure and liquid staking with JitoSOL distributing MEV rewards',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'Solana\'s MEV layer and leading liquid staking provider — JitoSOL earns more than base staking.',
    deepInsight: 'Jito brings MEV (Maximal Extractable Value) infrastructure to Solana, allowing searchers to bundle transactions for priority inclusion. JitoSOL is a liquid staking token that passes MEV rewards to stakers, often yielding higher returns than vanilla staking. It\'s crucial infrastructure for Solana\'s DeFi ecosystem and validator economics.',
  },
  {
    id: 'tensor',
    parentId: 'solana-defi',
    label: 'Tensor',
    description: 'Pro-trader NFT marketplace with AMM pools and real-time charts on Solana',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'The "Bloomberg Terminal" for Solana NFT trading.',
    deepInsight: 'Tensor revolutionized Solana NFT trading with professional features: real-time charts, instant listing/delisting, and AMM pools for instant NFT liquidity. It treats NFTs as financial assets, enabling strategies like floor sweeping and collection-level automated trading strategies.',
  },
  {
    id: 'pump-fun',
    parentId: 'solana-defi',
    label: 'Pump.fun',
    description: 'Viral memecoin launchpad with bonding curve mechanics on Solana',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'The memecoin factory — launch a token in 2 minutes with no upfront liquidity needed.',
    deepInsight: 'Pump.fun democratized token creation with its bonding curve model. Anyone can launch a memecoin for ~$2. As people buy, the price increases along a curve. When market cap reaches $69k, liquidity is automatically migrated to Raydium. It generated over $500M in fees in 2024 and became a cultural phenomenon, processing billions in daily volume.',
  },
  {
    id: 'orca',
    parentId: 'solana-defi',
    label: 'Orca',
    description: 'User-friendly AMM with concentrated liquidity Whirlpools on Solana',
    category: 'player',
    dependencies: ['solana-defi'],
    shortOverview: 'Solana\'s most user-friendly DEX with efficient concentrated liquidity pools.',
    deepInsight: 'Orca pioneered concentrated liquidity on Solana with "Whirlpools". Known for its clean UX and fair-launch tokenomics (ORCA with no VC cliff), it\'s a go-to for new project token launches and automated LP management. Its simplicity made DeFi accessible to Solana newcomers.',
  },

  // ── BASE DEFI ────────────────────────────────────────────────────────────────

  {
    id: 'base-defi',
    parentId: 'base',
    label: 'Base DeFi Ecosystem',
    description: 'DeFi and consumer app ecosystem on Coinbase\'s L2',
    category: 'primitive',
    dependencies: ['base'],
    shortOverview: 'Base\'s rapidly growing DeFi ecosystem — hub for consumer crypto and social apps.',
    deepInsight: 'Base has attracted a vibrant DeFi ecosystem thanks to Coinbase\'s distribution (100M+ users) and OP Stack reliability. It\'s become the home for consumer crypto apps, social tokens, and new DeFi experiments. The combination of Coinbase\'s user base and low fees has made Base the fastest-growing chain in 2024.',
  },
  {
    id: 'aerodrome',
    parentId: 'base-defi',
    label: 'Aerodrome',
    description: 'Dominant DEX on Base using ve(3,3) tokenomics and bribe-driven liquidity',
    category: 'player',
    dependencies: ['base-defi'],
    shortOverview: 'Base\'s liquidity hub — the Uniswap + Curve of the Coinbase L2.',
    deepInsight: 'Aerodrome is a fork of Velodrome (Optimism\'s top DEX), using ve(3,3) tokenomics where voting power decays and must be renewed weekly. Protocols bribe veAERO lockers to direct emissions to their pools, creating an efficient liquidity marketplace. It processes hundreds of millions in daily volume and dominates Base TVL.',
  },
  {
    id: 'moonwell',
    parentId: 'base-defi',
    label: 'Moonwell',
    description: 'Leading lending protocol native to Base and Moonbeam with safety-first design',
    category: 'player',
    dependencies: ['base-defi'],
    shortOverview: 'Base\'s premier lending market — built with security and simplicity.',
    deepInsight: 'Moonwell brought battle-tested lending to Base, focusing on security and simplicity. It supports major assets like ETH, USDC, and cbETH, serving as the backbone for leverage strategies on the chain. Moonwell is one of the few lending protocols with a native mobile-first experience.',
  },
  {
    id: 'friend-tech-base',
    parentId: 'base-defi',
    label: 'SocialFi on Base',
    description: 'Social tokens and creator economy protocols built on Base',
    category: 'primitive',
    dependencies: ['base-defi'],
    shortOverview: 'Base has become the home of social token experiments and creator economics.',
    deepInsight: 'Friend.tech launched the SocialFi movement on Base, showing that crypto-native social monetization was possible. Now countless social token protocols, creator coins, and community DAOs call Base home, leveraging Coinbase\'s smooth onboarding for mainstream users.',
  },

];
